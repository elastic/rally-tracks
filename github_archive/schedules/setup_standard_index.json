{
  "operation": {
    "operation-type": "delete-index"
  },
  "tags": [
    "setup"
  ]
},
{
  "operation": {
    "name": "delete-data-stream-gharchive",
    "operation-type": "delete-data-stream",
    "data-stream": "gharchive"
  },
  "tags": [
    "setup"
  ]
},
{
  "operation": {
    "operation-type": "create-index",
    "settings": {{ index_settings | default({}) | tojson }}
  },
  "tags": [
    "setup"
  ]
},
{
  "operation": {
    "name": "wait-for-cluster-health-status {{cluster_health}}",
    "operation-type": "cluster-health",
    "index": "github-archive",
    "request-params": {
      "wait_for_status": "{{cluster_health | default('green')}}",
      "wait_for_no_relocating_shards": "true"
    },
    "retry-until-success": true
  },
  "tags": [
    "setup"
  ]
}