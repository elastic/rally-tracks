    {
      "name": "append-no-conflicts",
      "description": "Indexes the whole document corpus using Elasticsearch default settings. We only adjust the number of replicas as we benchmark a single node cluster and Rally will only start the benchmark if the cluster turns green. Document ids are unique so all index operations are append only.",
      "default": true,
      "schedule": [
        {
          "operation": "delete-index"
        },
        {
          "operation": {
            "operation-type": "create-index",
            "settings": {{index_settings | default({}) | tojson}}
          }
        },
        {
          "name": "check-cluster-health",
          "operation": {
            "operation-type": "cluster-health",
            "index": "eventdata",
            "request-params": {
              "wait_for_status": "{{cluster_health | default('green')}}",
              "wait_for_no_relocating_shards": "true"
            }
          }
        },
        {
          "operation": "index-append",
          "warmup-time-period": 120,
          "clients": {{bulk_indexing_clients | default(8)}}
        },
        {
          "operation": {
            "operation-type": "force-merge",
            "request-timeout": 7200
          }
        },
        {
          "name": "wait-until-merges-finish",
          "operation": {
            "operation-type": "index-stats",
            "index": "_all",
            "condition": {
              "path": "_all.total.merges.current",
              "expected-value": 0
            },
            "retry-until-success": true,
            "include-in-reporting": false
          }
        }
      ]
    },
    {
      "name": "transform-browser-and-os",
      "description": "Indexes the whole document corpus using Elasticsearch default settings. We only adjust the number of replicas as we benchmark a single node cluster and Rally will only start the benchmark if the cluster turns green. Document ids are unique so all index operations are append only.",
      "default": false,
      "schedule": [
        {
          "operation": "delete-index"
        },
        {
          "operation": {
            "operation-type": "create-index",
            "settings": {{index_settings | default({}) | tojson}}
          }
        },
        {
          "name": "check-cluster-health",
          "operation": {
            "operation-type": "cluster-health",
            "index": "eventdata",
            "request-params": {
              "wait_for_status": "{{cluster_health | default('green')}}",
              "wait_for_no_relocating_shards": "true"
            }
          }
        },
        {
          "operation": "index-append",
          "warmup-time-period": 120,
          "clients": {{bulk_indexing_clients | default(8)}}
        },
        {
          "operation": {
            "operation-type": "force-merge",
            "request-timeout": 7200
          }
        },
        {
          "name": "wait-until-merges-finish",
          "operation": {
            "operation-type": "index-stats",
            "index": "_all",
            "condition": {
              "path": "_all.total.merges.current",
              "expected-value": 0
            },
            "retry-until-success": true,
            "include-in-reporting": false
          }
        },
        {
          "operation": {
            "operation-type": "delete-transform",
            "transform-id": "transform-browser-and-os",
            "force": true
          }
        },
        {
          "operation": {
            "operation-type": "create-transform",
            "transform-id": "transform-browser-and-os",
            "body": {
              "source": {
                "index": "eventdata"
              },
              "pivot": {
                "group_by": {
                  "browser": {
                    "terms": {
                      "field": "useragent.name"
                    }
                  },
                  "os": {
                    "terms": {
                      "field": "useragent.os_name"
                    }
                  },
                  "country_name": {
                    "terms": {
                      "field": "geoip.country_name"
                    }
                  }
                },
                "aggregations": {
                  "count": {
                    "value_count": {
                      "field": "useragent.name"
                    }
                  },
                  "200": {
                    "filter": {
                      "term": {
                        "response": 200
                      }
                    }
                  },
                  "206": {
                    "filter": {
                      "term": {
                        "response": 206
                      }
                    }
                  },
                  "301": {
                    "filter": {
                      "term": {
                          "response": 301
                      }
                    }
                  },
                  "302": {
                    "filter": {
                      "term": {
                        "response": 302
                      }
                    }
                  },
                  "304": {
                    "filter": {
                      "term": {
                        "response": 304
                      }
                    }
                  },
                  "404": {
                    "filter": {
                      "term": {
                        "response": 404
                      }
                    }
                  },
                  "405": {
                    "filter": {
                      "term": {
                        "response": 405
                      }
                    }
                  },
                  "412": {
                    "filter": {
                      "term": {
                        "response": 412
                      }
                    }
                  },
                  "499": {
                    "filter": {
                      "term": {
                        "response": 499
                      }
                    }
                  },
                  "bytes.avg": {
                    "avg": {
                      "field": "bytes"
                    }
                  },
                  "bytes.max": {
                    "max": {
                      "field": "bytes"
                    }
                  },
                  "bytes.min": {
                    "min": {
                      "field": "bytes"
                    }
                  },
                  "clientip.dc": {
                    "cardinality": {
                      "field": "clientip"
                    }
                  }
                }
              },
              "dest": {
                "index": "transform-browser-and-os"
              },
              "settings": {
                "max_page_search_size": {{max_page_search_size | default(500)}}
              }
            }
          }
        },
        {
          "operation": {
            "operation-type": "start-transform",
            "transform-id": "transform-browser-and-os"
          }
        },
        {
          "operation": {
            "operation-type": "stop-transform",
            "transform-id": "transform-browser-and-os",
            "transform-timeout": 1800,
            "timeout": "30m"
          }
        }
      ]
    }
