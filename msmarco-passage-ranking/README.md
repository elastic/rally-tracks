## MS MARCO Passage Ranking Track

This track assesses the search performance of the dataset available at [microsoft/MSMARCO-Passage-Ranking](https://github.com/microsoft/MSMARCO-Passage-Ranking).
To compare search performance, the following strategies are employed:
* `bm25`: This is a straightforward strategy that involves indexing the text fields using a standard analyzer and querying using the match query method.
* `text-expansion`: In this strategy, we utilize a sparse model to expand both the documents and queries with weighted tokens. It's worth noting that the original dataset has already been augmented with these weighted tokens.
* `hybrid`: The hybrid strategy combines both the bm25 and text-expansion approaches at query time. This is achieved through a simple boolean logic and a query type-specific boost.

It's important to highlight that the text-expansion and hybrid strategies are dependent on a dataset that has undergone query token expansion.

Additional properties can be sent in to `text_expansion` and `hybrid`: `prune` will prune insignificant tokens from the text expansion query and `rescore` will issue a rescore query that rescores with the pruned tokens. Both of these values default to `false`.

### Example Document

Documents adhere to the [JSON Lines format](https://jsonlines.org/).
When a single document is pretty printed, it takes the following example format:

<details>
  <summary><i>Example document</i></summary>

```json
{
  "id": "0",
  "text": " The presence of communication amid scientific minds was equally important to the success of the Manhattan Project as scientific intellect was. The only cloud hanging over the impressive achievement of the atomic researchers and engineers is what their success truly meant; hundreds of thousands of innocent lives obliterated.",
  "text_expansion_elser": {
    "1012": 0.0532,
    "2001": 0.4969,
    "2004": 0.0698,
    "2020": 0.1003,
    "2036": 0.002,
    "2058": 0.504,
    "2069": 0.772,
    "2076": 0.0279,
    "2111": 0.3005,
    "2116": 0.4992,
    "2162": 0.3354,
    "2166": 0.5433,
    "2245": 0.1569,
    "2259": 0.1686,
    "2331": 0.3996,
    "2351": 0.3937,
    "2390": 0.0994,
    "2426": 0.781,
    "2439": 0.0421,
    "2454": 0.3381,
    "2470": 0.5382,
    "2492": 0.0514,
    "2510": 0.0542,
    "2529": 0.1986,
    "2535": 0.3113,
    "2557": 0.3262,
    "2561": 0.241,
    "2565": 0.1594,
    "2568": 1.003,
    "2590": 1.2239,
    "2622": 1.0881,
    "2653": 0.2192,
    "2671": 0.7729,
    "2682": 0.193,
    "2730": 0.4074,
    "2831": 0.0815,
    "2934": 0.0107,
    "2964": 0.0184,
    "2968": 0.0958,
    "2974": 0.3976,
    "3003": 0.1792,
    "3067": 0.3312,
    "3112": 1.2943,
    "3144": 0.8366,
    "3169": 0.2145,
    "3214": 0.4048,
    "3221": 0.3142,
    "3241": 0.2569,
    "3260": 0.5591,
    "3268": 0.7352,
    "3271": 0.0994,
    "3274": 0.1954,
    "3278": 0.4488,
    "3294": 0.1636,
    "3330": 0.5762,
    "3350": 0.0569,
    "3354": 0.5979,
    "3377": 0.5128,
    "3386": 0.1299,
    "3399": 0.0078,
    "3462": 0.067,
    "3466": 0.412,
    "3521": 0.1644,
    "3570": 0.116,
    "3574": 0.2386,
    "3578": 0.2394,
    "3595": 0.5439,
    "3667": 0.0039,
    "3712": 0.1776,
    "3716": 0.4197,
    "3739": 1.15,
    "3742": 0.0165,
    "3754": 0.3381,
    "3758": 0.4986,
    "3768": 0.234,
    "3800": 0.4094,
    "3834": 0.397,
    "3874": 0.0967,
    "3908": 0.1962,
    "3947": 0.227,
    "3987": 0.0643,
    "3992": 0.6553,
    "4045": 1.0848,
    "4072": 0.1544,
    "4073": 0.1212,
    "4105": 0.7038,
    "4142": 0.0941,
    "4167": 0.6044,
    "4187": 0.2652,
    "4230": 0.1652,
    "4249": 0.1038,
    "4255": 0.0421,
    "4265": 0.0346,
    "4301": 0.6719,
    "4378": 0.3005,
    "4382": 0.1719,
    "4454": 0.9116,
    "4471": 0.8551,
    "4483": 0.0551,
    "4512": 0.2082,
    "4517": 1.1936,
    "4613": 0.3013,
    "4795": 0.001,
    "4806": 1.1799,
    "4807": 1.5196,
    "4945": 0.307,
    "5056": 0.0716,
    "5081": 0.4855,
    "5082": 0.2278,
    "5112": 0.4927,
    "5177": 0.5751,
    "5190": 0.762,
    "5192": 0.193,
    "5195": 0.4305,
    "5197": 0.4002,
    "5263": 0.086,
    "5584": 0.3917,
    "5606": 0.7192,
    "5621": 0.3213,
    "5689": 1.1906,
    "5694": 0.1978,
    "5792": 0.0174,
    "5817": 0.0569,
    "5892": 0.2569,
    "5894": 0.2727,
    "5920": 0.2478,
    "5921": 0.5762,
    "5951": 0.3041,
    "5968": 0.9762,
    "6035": 0.3957,
    "6112": 1.6164,
    "6145": 0.4879,
    "6150": 0.4531,
    "6178": 0.0551,
    "6179": 0.0761,
    "6215": 0.5893,
    "6338": 0.294,
    "6344": 1.2325,
    "6378": 0.4184,
    "6394": 0.5461,
    "6396": 0.3192,
    "6429": 0.4795,
    "6438": 0.6902,
    "6454": 0.0542,
    "6529": 0.4927,
    "6580": 0.0542,
    "6614": 0.0298,
    "6691": 0.3326,
    "6726": 0.2294,
    "6731": 0.5668,
    "6755": 0.0327,
    "6827": 0.4425,
    "6831": 0.4413,
    "6842": 0.0985,
    "6865": 0.723,
    "6950": 0.4758,
    "7036": 1.3646,
    "7128": 1.7132,
    "7155": 0.7144,
    "7224": 0.474,
    "7344": 0.027,
    "7551": 0.4229,
    "7691": 0.354,
    "7738": 0.1073,
    "7784": 0.3374,
    "7789": 0.7845,
    "7857": 0.0049,
    "7968": 0.0126,
    "8012": 0.0615,
    "8027": 0.1922,
    "8044": 1.1989,
    "8052": 1.0313,
    "8053": 0.4951,
    "8249": 0.1047,
    "8274": 0.5302,
    "8495": 0.2933,
    "8573": 0.8392,
    "8643": 0.3381,
    "8664": 0.639,
    "8817": 0.5238,
    "8995": 0.3904,
    "9250": 0.227,
    "9272": 0.1073,
    "9273": 1.0059,
    "9274": 0.3227,
    "9414": 0.0788,
    "9593": 1.0789,
    "9666": 0.44,
    "9714": 0.4867,
    "9881": 0.0788,
    "9915": 0.3354,
    "10013": 0.4587,
    "10106": 0.7258,
    "10232": 0.4074,
    "10398": 0.2947,
    "10585": 0.0155,
    "10639": 0.4801,
    "10753": 0.5563,
    "10811": 0.1825,
    "11067": 0.1187,
    "11094": 0.8298,
    "11343": 0.1221,
    "11834": 0.4068,
    "11957": 0.2719,
    "11981": 0.2904,
    "12064": 0.0203,
    "12168": 0.043,
    "12656": 0.0049,
    "13298": 0.0477,
    "13353": 0.0734,
    "13463": 1.4085,
    "13702": 0.354,
    "13787": 0.7519,
    "14247": 0.5244,
    "14332": 0.4939,
    "14354": 0.0486,
    "14446": 0.026,
    "14518": 0.2509,
    "14582": 0.1012,
    "14836": 0.501,
    "15237": 0.171,
    "15240": 0.0251,
    "15304": 0.1652,
    "15313": 0.2255,
    "15360": 0.2263,
    "15699": 0.077,
    "15909": 0.067,
    "16332": 0.0486,
    "16349": 0.4758,
    "17128": 0.1376,
    "17171": 0.8829,
    "17571": 0.0364,
    "17610": 0.2239,
    "17669": 0.4235,
    "17690": 0.0346,
    "20168": 0.4184,
    "20223": 0.615,
    "22779": 1.2528,
    "23516": 0.2161,
    "24706": 0.2808,
    "24823": 1.1549,
    "25501": 0.197,
    "25699": 0.1946,
    "26757": 0.0184,
    "26761": 0.3113,
    "27304": 0.2137,
    "27885": 0.9349
  },
  "text_expansion_splade": {
    "1012": 0.3631187677383423,
    "1996": 0.10386212915182114,
    "2001": 0.6482197642326355,
    "2018": 0.26300138235092163,
    "2020": 0.29727572202682495,
    "2036": 0.047292523086071014,
    "2037": 0.022334402427077293,
    "2056": 0.1187933161854744,
    "2058": 0.7198290824890137,
    "2069": 0.7356694340705872,
    "2111": 0.1949157863855362,
    "2116": 0.5763568878173828,
    "2138": 0.5245229005813599,
    "2162": 0.022828133776783943,
    "2166": 0.4356202185153961,
    "2245": 0.6946561932563782,
    "2253": 0.0927567183971405,
    "2259": 0.9687072038650513,
    "2306": 0.17516079545021057,
    "2307": 0.09703954309225082,
    "2318": 0.18717986345291138,
    "2331": 0.43182945251464844,
    "2351": 0.055112287402153015,
    "2359": 0.0021027815528213978,
    "2390": 0.13972416520118713,
    "2419": 0.10198730230331421,
    "2426": 0.867919921875,
    "2428": 0.2679789364337921,
    "2466": 0.09735031425952911,
    "2470": 0.5125362873077393,
    "2535": 0.2829703092575073,
    "2554": 0.05223208665847778,
    "2557": 0.324849396944046,
    "2568": 1.125809669494629,
    "2590": 0.9075665473937988,
    "2622": 1.6490538120269775,
    "2671": 0.45066821575164795,
    "2739": 0.0042104171589016914,
    "2765": 0.02844362147152424,
    "2812": 0.41171392798423767,
    "2817": 0.09246815741062164,
    "2837": 0.05304008349776268,
    "2913": 0.052729036659002304,
    "2920": 0.0004190743784420192,
    "3003": 0.32047703862190247,
    "3092": 0.2290302962064743,
    "3112": 1.3542659282684326,
    "3125": 0.2881143391132355,
    "3144": 1.1722984313964844,
    "3214": 0.44847381114959717,
    "3241": 0.7367000579833984,
    "3249": 0.22390367090702057,
    "3260": 0.005878155585378408,
    "3268": 0.48173144459724426,
    "3271": 0.7639228701591492,
    "3278": 0.3204863369464874,
    "3280": 0.42589884996414185,
    "3330": 0.8624790906906128,
    "3463": 0.03765460103750229,
    "3478": 0.5670281648635864,
    "3716": 0.002337549114599824,
    "3739": 1.5856860876083374,
    "3768": 0.14177672564983368,
    "3800": 0.22762496769428253,
    "3908": 0.6601752042770386,
    "3934": 1.0603137016296387,
    "3992": 0.9148210287094116,
    "4028": 0.3479207456111908,
    "4045": 1.4387931823730469,
    "4072": 0.035774633288383484,
    "4146": 0.04391007870435715,
    "4254": 0.7179223895072937,
    "4301": 0.4919990599155426,
    "4382": 0.043692447245121,
    "4454": 1.1404461860656738,
    "4471": 0.4757223427295685,
    "4504": 0.22777049243450165,
    "4517": 0.7626373767852783,
    "4598": 0.5973050594329834,
    "4806": 1.4541637897491455,
    "4807": 1.6540457010269165,
    "4847": 0.0899198055267334,
    "4928": 0.005014462396502495,
    "4988": 0.1590251922607422,
    "5081": 0.2989031970500946,
    "5113": 0.12192646414041519,
    "5177": 0.11911000311374664,
    "5190": 0.274760365486145,
    "5197": 1.2774497270584106,
    "5201": 0.42462146282196045,
    "5234": 0.3017968237400055,
    "5456": 0.18773683905601501,
    "5621": 0.8214423656463623,
    "5689": 1.2033592462539673,
    "5792": 0.07180116325616837,
    "5817": 0.06378868222236633,
    "5823": 0.029040874913334846,
    "5875": 0.20899030566215515,
    "5920": 0.03591103106737137,
    "5921": 0.949133038520813,
    "5951": 0.1824076920747757,
    "5968": 0.9050946831703186,
    "6033": 0.0034226696006953716,
    "6112": 1.2841026782989502,
    "6145": 0.6295260190963745,
    "6215": 0.0640154704451561,
    "6344": 1.0698997974395752,
    "6396": 0.11138009279966354,
    "6429": 0.2049790322780609,
    "6438": 0.017457427456974983,
    "6529": 0.6316996216773987,
    "6627": 0.12303610891103745,
    "6691": 0.01563728041946888,
    "6731": 0.09058317542076111,
    "6801": 0.23981697857379913,
    "6865": 0.4851866662502289,
    "6950": 0.6207808256149292,
    "7036": 1.8336427211761475,
    "7128": 2.3282833099365234,
    "7155": 0.8153350949287415,
    "7461": 0.026216521859169006,
    "7551": 0.6143031120300293,
    "7596": 0.1737474799156189,
    "7691": 0.3292960822582245,
    "7784": 0.3373029828071594,
    "7789": 1.1497657299041748,
    "7848": 0.19267450273036957,
    "7857": 0.14235664904117584,
    "8044": 1.107617735862732,
    "8052": 0.9456089735031128,
    "8053": 0.488263875246048,
    "8553": 0.10458123683929443,
    "8573": 0.19699245691299438,
    "8664": 0.20899634063243866,
    "8817": 0.44853806495666504,
    "8826": 0.2641114592552185,
    "9250": 0.7495864033699036,
    "9273": 1.368172287940979,
    "9593": 1.4299263954162598,
    "9727": 0.0375167541205883,
    "10013": 0.1794661432504654,
    "10106": 0.9806074500083923,
    "10617": 0.055851664394140244,
    "10639": 0.20029209554195404,
    "10753": 0.4513668417930603,
    "11657": 0.33716171979904175,
    "12108": 0.5875276327133179,
    "13128": 0.3405190408229828,
    "13463": 1.9018585681915283,
    "13702": 0.2059791535139084,
    "13787": 0.8281938433647156,
    "14152": 0.23866963386535645,
    "14332": 0.4160661995410919,
    "15237": 0.11889691650867462,
    "15313": 0.17253799736499786,
    "15359": 0.005433463957160711,
    "15699": 0.0891980454325676,
    "16724": 0.38965851068496704,
    "17171": 0.7403897643089294,
    "17571": 0.2497434914112091,
    "17669": 0.044961147010326385,
    "20168": 0.326712042093277,
    "20805": 0.04431282728910446,
    "20972": 0.25430595874786377,
    "22134": 0.021065181121230125,
    "22229": 0.07197896391153336,
    "22779": 1.992691993713379,
    "24762": 0.02640775963664055,
    "24823": 1.7344380617141724,
    "25526": 0.09561435878276825,
    "25699": 0.07097204029560089,
    "26761": 0.2922402024269104,
    "27885": 0.8794988989830017
  }
}
```
</details>

The `text_expansion_elser` field contains weighted tokens expanded with [ELSER v2](https://www.elastic.co/guide/en/machine-learning/current/ml-nlp-elser.html#elser-v2) from the `text` field.
The `text_expansion_field` field contains weighted tokens expanded with Embedded using [SPLADE CoCondenser
EnsembleDistil](https://huggingface.co/naver/splade-cocondenser-ensembledistil) from the `text` field.

### Example Query

Queries are structured within a JSON array, where each individual object signifies a unique 'query' and its corresponding expansion achieved through ELSER v2, which is stored pre-computed in the 'text_expansion_elser' field.:

<details>
  <summary><i>Example query object</i></summary>

```json
{
  "id": "1185869",
  "query": ")what was the immediate impact of the success of the manhattan project?",
  "text_expansion_elser": {
    "1007": 0.0467,
    "2001": 0.7492,
    "2020": 0.0107,
    "2054": 0.1719,
    "2137": 0.1536,
    "2150": 0.343,
    "2162": 0.1264,
    "2220": 0.3013,
    "2234": 0.1064,
    "2458": 0.3609,
    "2537": 0.2433,
    "2590": 0.4951,
    "2622": 1.6016,
    "2765": 0.2524,
    "2810": 0.0815,
    "2933": 0.0905,
    "3066": 0.1882,
    "3112": 1.6759,
    "3144": 1.1732,
    "3169": 0.2121,
    "3171": 0.5579,
    "3202": 1.0016,
    "3260": 0.3163,
    "3278": 0.234,
    "3303": 0.435,
    "3354": 0.4463,
    "3377": 0.3547,
    "3381": 0.2247,
    "3386": 0.1898,
    "3462": 0.0029,
    "3466": 0.9516,
    "3578": 0.4807,
    "3740": 0.3751,
    "3758": 0.6694,
    "3845": 0.0788,
    "3874": 0.1536,
    "3890": 0.0346,
    "3925": 0.0421,
    "3947": 0.1029,
    "4105": 0.2247,
    "4158": 0.1108,
    "4187": 0.068,
    "4254": 1.4524,
    "4483": 0.6076,
    "4517": 0.9194,
    "4736": 0.1108,
    "4926": 0.0698,
    "4945": 0.4469,
    "5036": 0.2137,
    "5081": 0.3099,
    "5082": 0.1502,
    "5817": 0.241,
    "5951": 0.3374,
    "5968": 0.6883,
    "6035": 0.2263,
    "6186": 0.0402,
    "6215": 0.3206,
    "6234": 1.4936,
    "6256": 0.0058,
    "6344": 0.6223,
    "6378": 0.7315,
    "6396": 0.0523,
    "6580": 0.286,
    "7128": 2.0289,
    "7461": 0.6533,
    "7738": 0.0634,
    "7784": 0.3113,
    "8027": 0.4171,
    "8573": 1.1243,
    "9274": 0.2417,
    "9560": 0.234,
    "9727": 0.2823,
    "9915": 0.1536,
    "10530": 0.1519,
    "10796": 0.1776,
    "12393": 0.0523,
    "14200": 0.1994,
    "14463": 0.4698,
    "15237": 0.0458,
    "16551": 0.1809,
    "16696": 0.2852,
    "17060": 0.0058,
    "20223": 0.5393,
    "20506": 0.2874
  },
  "text_expansion_splade": {
    "1012": 0.05620688199996948,
    "2001": 0.8697123527526855,
    "2018": 0.20457512140274048,
    "2020": 0.33838802576065063,
    "2138": 0.5695716142654419,
    "2162": 0.23281005024909973,
    "2253": 0.13222749531269073,
    "2259": 1.0838828086853027,
    "2318": 0.29319196939468384,
    "2343": 0.1350715458393097,
    "2359": 0.17300662398338318,
    "2390": 0.197800874710083,
    "2419": 0.18021120131015778,
    "2466": 0.19263622164726257,
    "2590": 0.5410725474357605,
    "2622": 1.765165090560913,
    "2724": 0.5046749711036682,
    "2765": 0.6416297554969788,
    "3112": 1.6472687721252441,
    "3125": 0.32392439246177673,
    "3144": 1.4906034469604492,
    "3202": 0.1286369413137436,
    "3271": 0.6674743294715881,
    "3466": 1.0303399562835693,
    "3478": 0.6903711557388306,
    "3607": 0.017673052847385406,
    "3896": 0.601482093334198,
    "3934": 0.9560214877128601,
    "4028": 0.11801257729530334,
    "4254": 1.6604866981506348,
    "4504": 0.3938198387622833,
    "4517": 0.11678136140108109,
    "5081": 0.09045428782701492,
    "5201": 0.35325339436531067,
    "5234": 0.11604964733123779,
    "5823": 0.216314435005188,
    "5968": 0.7732505798339844,
    "6234": 1.5580408573150635,
    "6691": 0.03338003531098366,
    "7128": 2.529103994369507,
    "7461": 0.4140140414237976,
    "7521": 0.02865590713918209,
    "7551": 0.3331337869167328,
    "7596": 0.2527310848236084,
    "7738": 0.027308324351906776,
    "8372": 0.22642642259597778,
    "8573": 0.15812493860721588,
    "10530": 0.11040171980857849,
    "14670": 0.7605103254318237,
    "25755": 0.011098586022853851
  }
}
```
</details>

The `text_expansion_elser` field contains weighted tokens expanded with [ELSER v2](https://www.elastic.co/guide/en/machine-learning/current/ml-nlp-elser.html#elser-v2) from the `query` field.
The `text_expansion_field` field contains weighted tokens expanded with Embedded using [SPLADE CoCondenser
EnsembleDistil](https://huggingface.co/naver/splade-cocondenser-ensembledistil) from the `query` field.

### Parameters
This track accepts the following parameters with Rally 0.8.0+ using `--track-params`:

* `bulk_size` (default: 5000)
* `bulk_indexing_clients` (default: 8)
* `ingest_percentage` (default: 100)
* `number_of_shards` (default: 1)
* `number_of_replicas` (default: 0)
* `search_clients` (default: 1)

### License
Terms and Conditions for using the MS MARCO datasets can be found at https://microsoft.github.io/msmarco/

### Citation
@article{bajaj2016ms,
title={Ms marco: A human generated machine reading comprehension dataset},
author={Bajaj, Payal and Campos, Daniel and Craswell, Nick and Deng, Li and Gao, Jianfeng and Liu, Xiaodong and Majumder, Rangan and McNamara, Andrew and Mitra, Bhaskar and Nguyen, Tri and others},
journal={arXiv preprint arXiv:1611.09268},
year={2016}
}

@misc{https://doi.org/10.48550/arxiv.2205.04733,
doi = {10.48550/ARXIV.2205.04733},
url = {https://arxiv.org/abs/2205.04733},
author = {Formal, Thibault and Lassance, Carlos and Piwowarski, Benjamin and Clinchant, Stéphane},
keywords = {Information Retrieval (cs.IR), Computation and Language (cs.CL), FOS: Computer and information sciences, FOS: Computer and information sciences},
title = {From Distillation to Hard Negative Sampling: Making Sparse Neural IR Models More Effective},
publisher = {arXiv},
year = {2022},
copyright = {Creative Commons Attribution Non Commercial Share Alike 4.0 International}
}
