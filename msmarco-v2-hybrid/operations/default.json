{% set p_corpora = (corpora | default(["msmarco-v2_float-initial-indexing-1", "msmarco-v2_float-initial-indexing-2", "msmarco-v2_float-initial-indexing-3", "msmarco-v2_float-initial-indexing-4", "msmarco-v2_float-initial-indexing-5", "msmarco-v2_float-initial-indexing-6", "msmarco-v2_float-initial-indexing-7", "msmarco-v2_float-initial-indexing-8"])) %}
{
  "name": "create-index",
  "operation-type": "create-index",
  "settings": {{index_settings | default({}) | tojson}}
},
{
  "name": "check-cluster-health",
  "operation-type": "cluster-health",
  "request-params": {
    "wait_for_status": "green"
  },
  "retry-until-success": true
},
{
  "name": "initial-documents-indexing",
  "operation-type": "bulk",
  "corpora":  [
    {% for doc_id in p_corpora %}
       {{doc_id | tojson}}
       {{ ", " if not loop.last else "" }}
   {% endfor %}],
  "bulk-size": {{initial_indexing_bulk_size | default(500)}},
  "ingest-percentage": {{initial_indexing_ingest_percentage | default(100)}}
},
{
  "name": "hybrid-search-bm25-knn",
  "operation-type": "raw-request",
  "param-source": "hybrid-bm25-knn-param-source",
  "size": 10,
  "k": 10,
  "num_candidates": 50
},
{
  "name": "esql-hybrid-search-bm25-knn",
  "operation-type": "esql",
  "param-source": "esql-hybrid-bm25-knn-param-source",
  "size": 10,
  "k": 10,
  "num_candidates": 50
}
